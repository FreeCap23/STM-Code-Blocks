<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM Code Blocks: STM32 HAL Project Structure for Arduino Users</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">STM Code Blocks
   </div>
   <div id="projectbrief">Easy to use and understand code blocks for the STM MCU family</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_Guides_2Arduino__to__STM.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">STM32 HAL Project Structure for Arduino Users</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1"></a> If you're used to programming in Arduino (where everything is typically in one .ino file with setup() and loop()), STM32 projects generated with STM32CubeMX are more structured and split across multiple files. Here's how to map the concepts:</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Where to Add Global and Local Variables</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Global Variables</h2>
<p>In STM32CubeMX-generated code, global variables should be declared in a new file <code>globals.h</code>.</p>
<p>Example </p><div class="fragment"><div class="line"><span class="comment">/* === globals.h === */</span></div>
<div class="line"><span class="keyword">extern</span> <span class="keywordtype">int</span> myGlobalVar;  <span class="comment">// Declaration</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* === globals.c === */</span></div>
<div class="line"><span class="keywordtype">int</span> myGlobalVar = 0;     <span class="comment">// Definition</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Libraries Required Based on Variable Types</h2>
<p>STM32 uses standard C types and headers. You often need to include standard headers manually for specific types. </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variable Type   </th><th class="markdownTableHeadNone">Header File Required   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>int</code>, <code>char</code>, <code>float</code>   </td><td class="markdownTableBodyNone">No extra headers needed   </td><td class="markdownTableBodyNone">Built-in types in C    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>bool</code>   </td><td class="markdownTableBodyNone"><code>#include &lt;stdbool.h&gt;</code>   </td><td class="markdownTableBodyNone"><code>true</code> and <code>false</code> constants    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>uint8_t</code>, <code>int16_t</code>, etc.   </td><td class="markdownTableBodyNone"><code>#include &lt;stdint.h&gt;</code>   </td><td class="markdownTableBodyNone">Fixed-width integer types   </td></tr>
</table>
<p>Examples:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span>   <span class="comment">// for uint8_t, int32_t, etc.</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdbool.h&gt;</span>  <span class="comment">// for bool, true, false</span></div>
<div class="line"> </div>
<div class="line">uint8_t myByte = 0;</div>
<div class="line"><span class="keywordtype">bool</span> isReady = <span class="keyword">false</span>;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5"></a>
What Is the Equivalent of setup() and loop()?</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Arduino   </th><th class="markdownTableHeadNone">STM32 (CubeMX/HAL)   </th><th class="markdownTableHeadNone">Notes    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>setup()</code>   </td><td class="markdownTableBodyNone">Code inside <code>int <a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point.">main(void)</a></code> after <code>HAL_Init()</code> and <code><a class="el" href="main_8c.html#a70af21c671abfcc773614a9a4f63d920" title="System Clock Configuration.">SystemClock_Config()</a></code>   </td><td class="markdownTableBodyNone">Initialization code goes here    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>loop()</code>   </td><td class="markdownTableBodyNone">Manual infinite loop: <code>while (1)</code>   </td><td class="markdownTableBodyNone">Put your repetitive code here   </td></tr>
</table>
<p>Example in <code><a class="el" href="main_8c.html" title=": Main program body">main.c</a></code>: </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">/* USER CODE BEGIN 1 */</span>    <span class="comment">// ← Initialization code before HAL and peripherals get initialised</span></div>
<div class="line">  <span class="comment">/* USER CODE END 1 */</span></div>
<div class="line"> </div>
<div class="line">  HAL_Init();                <span class="comment">// HAL initialization</span></div>
<div class="line">  <a class="code hl_function" href="main_8c.html#a70af21c671abfcc773614a9a4f63d920">SystemClock_Config</a>();      <span class="comment">// Clock setup</span></div>
<div class="line"> </div>
<div class="line">  MX_GPIO_Init();            <span class="comment">// Peripherals</span></div>
<div class="line">  MX_USART3_UART_Init();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">/* USER CODE BEGIN 2 */</span>     <span class="comment">// ← Initialization code here (like Arduino&#39;s setup())</span></div>
<div class="line">  <span class="comment">/* USER CODE END 2 */</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">/* USER CODE BEGIN 3 */</span>   <span class="comment">// ← Repeating code here (like Arduino&#39;s loop())</span></div>
<div class="line">    <span class="comment">/* USER CODE END 3 */</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="amain_8c_html_a70af21c671abfcc773614a9a4f63d920"><div class="ttname"><a href="main_8c.html#a70af21c671abfcc773614a9a4f63d920">SystemClock_Config</a></div><div class="ttdeci">void SystemClock_Config(void)</div><div class="ttdoc">System Clock Configuration.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00116">main.c:116</a></div></div>
<div class="ttc" id="amain_8c_html_a840291bc02cba5474a4cb46a9b9566fe"><div class="ttname"><a href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a></div><div class="ttdeci">int main(void)</div><div class="ttdoc">The application entry point.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00068">main.c:68</a></div></div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>&zwj;ℹ️ <b>Important</b>: Only write your own code in sections marked with comments like <code>/* USER CODE BEGIN x */</code> and <code>/* USER CODE END x */</code>. \ </p>
</blockquote>
<p>These regions are preserved when you regenerate code with STM32CubeMX. Anything outside these blocks may be deleted or overwritten. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
